import{_ as I,u as P,f as C,a as e,w as t,F as w,r as s,o as r,i as S,c as u,b as a,t as v,g as k,d as f,e as U}from"./app.06d20473.js";const j={data:()=>({dialog:!1,modalData:null}),props:{products:Object},methods:{updateModalContent(l,o=null){this.dialog=l,this.modalData=o,this.form.product_id=o.id},submit(){this.form.post("/buy",{onSuccess:l=>{var o;((o=l.props.flash.notification)==null?void 0:o.status)==="success"&&(this.dialog=!1,this.modalData=null)}})}},setup(l){return{form:P({product_id:null,package_id:null,quantity:0})}},computed:{getItems(){var o;let l=(o=this.modalData.packages.find(m=>m.id===this.form.package_id))==null?void 0:o.pivot.cost;return{productCost:l,totalCost:l&&this.form.quantity>0?l*this.form.quantity:0}}}},z=a("h5",null,"Poductos",-1),T={class:"text-h5"},E={class:"row mx-5"},H={class:"col-12 text-danger"},L={class:"row"},O={class:"col-12 col-md-4"},A={class:"col-12 col-md-4"},G={class:"col-12 col-md-4"},J={class:"row"},K={class:"col-12 col-md-4"},Q={class:"col-12 col-md-4"},R={class:"card-footer"},W={class:"row"},X={class:"col-6"},Y={class:"col-6"};function Z(l,o,m,n,$,c){const p=s("v-row"),y=s("v-divider"),V=s("v-img"),_=s("v-card-text"),g=s("v-card"),x=s("v-sheet"),D=s("v-col"),h=s("v-container"),q=s("v-card-title"),i=s("v-text-field"),B=s("v-select"),M=s("v-spacer"),b=s("v-btn"),N=s("v-card-actions"),F=s("v-dialog");return r(),C(w,null,[e(h,null,{default:t(()=>[e(p,{justify:"space-between pa-4 mb-2"},{default:t(()=>[z]),_:1}),e(y),e(p,null,{default:t(()=>[(r(!0),C(w,null,S(m.products,d=>(r(),u(D,{cols:"12",md:"2",key:d.id},{default:t(()=>[e(x,{rounded:"",class:"mx-auto p-0 m-0",height:"100%",width:"100%"},{default:t(()=>[e(g,{onClick:ee=>c.updateModalContent(!0,d),class:"w-100"},{default:t(()=>[e(V,{src:d.media[0].original_url,"lazy-src":d.media[0].original_url,"aspect-ratio":"1",cover:"",class:"bg-white rounded"},null,8,["src","lazy-src"]),e(_,{class:"text-center fw-bold w-100"},{default:t(()=>[f(v(d.name),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(F,{modelValue:l.dialog,"onUpdate:modelValue":o[4]||(o[4]=d=>l.dialog=d),persistent:""},{default:t(()=>[l.dialog?(r(),u(g,{key:0},{default:t(()=>[a("form",{onSubmit:o[3]||(o[3]=U((...d)=>c.submit&&c.submit(...d),["prevent"]))},[e(q,null,{default:t(()=>[a("span",T,"Comprar Cuenta de "+v(l.modalData.name),1)]),_:1}),n.form.errors.balance?(r(),u(_,{key:0},{default:t(()=>[a("div",E,[a("div",H,v(n.form.errors.balance),1)])]),_:1})):k("",!0),e(_,null,{default:t(()=>[e(h,null,{default:t(()=>[a("div",L,[a("div",O,[e(i,{"model-value":l.modalData.name,label:"Producto",disabled:""},null,8,["model-value"])]),a("div",A,[e(B,{"error-messages":n.form.errors.package_id,color:"primary",label:"Plan",modelValue:n.form.package_id,"onUpdate:modelValue":o[0]||(o[0]=d=>n.form.package_id=d),items:l.modalData.packages,"item-title":"name","item-value":"id"},null,8,["error-messages","modelValue","items"])]),a("div",G,[e(i,{"model-value":c.getItems.productCost,label:"Costo",disabled:""},null,8,["model-value"])])]),a("div",J,[a("div",K,[e(i,{modelValue:n.form.quantity,"onUpdate:modelValue":o[1]||(o[1]=d=>n.form.quantity=d),label:"Cantidad",type:"number"},null,8,["modelValue"])]),a("div",Q,[e(i,{"model-value":c.getItems.totalCost,label:"Total",disabled:""},null,8,["model-value"])])])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(M),a("div",R,[a("div",W,[a("div",X,[e(b,{disabled:n.form.processing,type:"submit",rounded:"lg",color:"success",class:"w-100"},{default:t(()=>[f(" Comprar ")]),_:1},8,["disabled"])]),a("div",Y,[e(b,{rounded:"lg",color:"danger",class:"w-100 text-white",onClick:o[2]||(o[2]=d=>c.updateModalContent(!1))},{default:t(()=>[f(" Cancelar ")]),_:1})])])])]),_:1})],32)]),_:1})):k("",!0)]),_:1},8,["modelValue"])],64)}const te=I(j,[["render",Z]]);export{te as default};
